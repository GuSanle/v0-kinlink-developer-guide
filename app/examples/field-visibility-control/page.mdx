import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { CodeBlock } from "@/components/code-block";
import Link from "next/link";
import { ArrowLeft } from "lucide-react";
import { Button } from "@/components/ui/button";

export const sampleCode = `/**
 * ç¤ºä¾‹3: å­—æ®µæ˜¾ç¤º/éšè—æ§åˆ¶
 * åŠŸèƒ½ï¼šæ§åˆ¶è¡¨å•å­—æ®µçš„æ˜¾ç¤ºå’Œéšè—çŠ¶æ€
 */
(function () {
  kinlink.events.on(kinlink.FormEvents.FORM_LOADED, () => {
    try {
      // å®Œå…¨éšè—å­—æ®µï¼ˆå€¼ä¸ä¼šè¢«æäº¤ï¼‰
      kinlink.formApi.hideField('å¤šé€‰_0');

      // ä»…è§†è§‰ä¸Šéšè—å­—æ®µï¼ˆå€¼ä»ä¼šè¢«æäº¤ï¼‰
      kinlink.formApi.visuallyHideField('é€‰æ‹©ç»„ç»‡');

      // é€šè¿‡æŒ‰é’®æ§åˆ¶æ˜¾ç¤º/éšè—åŒè¡Œè€…è¡¨æ ¼
      const toggleButton = document.createElement('button');
      toggleButton.type = 'button';
      toggleButton.textContent = 'æ˜¾ç¤º/éšè—åŒè¡Œè€…ä¿¡æ¯';
      toggleButton.style.margin = '10px 0';
      toggleButton.style.padding = '5px 10px';

      // è·å–è¡¨å•å…ƒç´ å¹¶æ·»åŠ æŒ‰é’®
      const formElement = document.querySelector('.ant-form') || document.body;
      formElement.insertBefore(toggleButton, formElement.firstChild);

      // åˆå§‹éšè—åŒè¡Œè€…è¡¨æ ¼
      kinlink.formApi.hideField('è¡¨æ ¼_13');
      let isVisible = false;

      // è®¾ç½®ç‚¹å‡»äº‹ä»¶åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€
      toggleButton.addEventListener('click', () => {
        if (isVisible) {
          kinlink.formApi.hideField('è¡¨æ ¼_13');
          toggleButton.textContent = 'æ˜¾ç¤ºåŒè¡Œè€…ä¿¡æ¯';
        } else {
          kinlink.formApi.showField('è¡¨æ ¼_13');
          toggleButton.textContent = 'éšè—åŒè¡Œè€…ä¿¡æ¯';
        }
        isVisible = !isVisible;
      });
    } catch (error) {
      console.error('æ§åˆ¶å­—æ®µæ˜¾ç¤º/éšè—å¤±è´¥:', error);
    }
  });
})();
`;

export const additionalSampleCode = `/**
 * è·å–å­—æ®µå…ƒç´ ï¼Œå¹¶ä½¿ç”¨æ¡ä»¶éšè—
 * è§†è§‰éšè—ä¸ºè¢«éšè—çš„å†…å®¹æœ€ç»ˆè¿˜æ˜¯ä¼šè¢«æäº¤ï¼Œè€ŒçœŸå®éšè—ä¸ºè¢«éšè—çš„å†…å®¹ä¸ä¼šè¢«æäº¤
 */
(function () {
  kinlink.events.on(kinlink.FormEvents.FORM_LOADED, () => {
    try {
      // ========== æºå¸¯é›»è©±å­—æ®µåé¢æ’å…¥æŒ‰é’®ï¼Œæ§åˆ¶ä¼šç¤¾åéšè—/æ˜¾ç¤º ==========
      const targetFieldCode = 'æ–‡å­—åˆ—__1è¡Œ__2'; // æºå¸¯é›»è©±
      const controlFieldCode = 'å•è¡Œæ–‡æœ¬æ¡†_10'; // ä¼šç¤¾å

      const input = document.querySelector('[id$="' + targetFieldCode + '"]');
      if (input) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = 'éšè—/æ˜¾ç¤ºä¼šç¤¾å';
        btn.style.marginLeft = '8px';
        input.parentNode.insertBefore(btn, input.nextSibling);
        let isHidden = false;
        btn.onclick = function () {
          if (isHidden) {
            kinlink.formApi.showField(controlFieldCode);
            btn.textContent = 'éšè—ä¼šç¤¾å';
          } else {
            kinlink.formApi.hideField(controlFieldCode);
            btn.textContent = 'æ˜¾ç¤ºä¼šç¤¾å';
          }
          isHidden = !isHidden;
        };
      }

      // ========== Eãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å­—æ®µåé¢æ’å…¥æŒ‰é’®ï¼Œè§†è§‰éšè—/æ˜¾ç¤ºèº«åˆ†è¨¼ç•ªå· ==========
      const emailFieldCode = 'æ–‡å­—åˆ—__1è¡Œ__3'; // Eãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
      const idFieldCode = 'å•è¡Œæ–‡æœ¬æ¡†_11'; // ãƒ‘ã‚¹ãƒãƒ¼ãƒˆç•ªå·ï¼èº«åˆ†è¨¼ç•ªå·
      const emailInput = document.querySelector('[id$="' + emailFieldCode + '"]');
      if (emailInput) {
        const btn2 = document.createElement('button');
        btn2.type = 'button';
        btn2.textContent = 'è§†è§‰éšè—/æ˜¾ç¤ºèº«åˆ†è¨¼ç•ªå·';
        btn2.style.marginLeft = '8px';
        emailInput.parentNode.insertBefore(btn2, emailInput.nextSibling);
        let isVisuallyHidden = false;
        btn2.onclick = function () {
          if (isVisuallyHidden) {
            kinlink.formApi.showField(idFieldCode);
            btn2.textContent = 'è§†è§‰éšè—èº«åˆ†è¨¼ç•ªå·';
          } else {
            kinlink.formApi.visuallyHideField(idFieldCode);
            btn2.textContent = 'æ˜¾ç¤ºèº«åˆ†è¨¼ç•ªå·';
          }
          isVisuallyHidden = !isVisuallyHidden;
        };
      }
    } catch (error) {
      console.error('æ’å…¥æŒ‰é’®å¹¶æ§åˆ¶å­—æ®µæ˜¾ç¤ºå¤±è´¥:', error);
    }
  });
})();
`;

<div className="container py-6 lg:py-10">
  <div className="flex items-center gap-4 mb-8">
    <Link href="/examples">
      <Button variant="outline" size="icon">
        <ArrowLeft className="h-4 w-4" />
      </Button>
    </Link>
    <h1 className="text-3xl font-bold tracking-tight">å­—æ®µåŠ¨æ€æ˜¾éšæ§åˆ¶ç¤ºä¾‹</h1>
  </div>

  <div className="my-8 space-y-6">
    <div className="space-y-4">
      <h2 className="text-2xl font-bold tracking-tight">å¯è§æ€§æ§åˆ¶åŠŸèƒ½æ¦‚è§ˆ</h2>
      > æ™ºèƒ½è¡¨å•å­—æ®µæ˜¾éšç®¡ç†ï¼Œå®ç°æ¡ä»¶å¼è¡¨å•å¸ƒå±€å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–

      æ­¤ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨**kinlink API**åŠ¨æ€æ§åˆ¶è¡¨å•å­—æ®µçš„å¯è§æ€§ã€‚é€šè¿‡**æ¡ä»¶é€»è¾‘**å®ç°å­—æ®µçš„æ˜¾ç¤ºå’Œéšè—ï¼Œåˆ›å»ºæ›´åŠ æ™ºèƒ½å’Œç”¨æˆ·å‹å¥½çš„è¡¨å•ä½“éªŒã€‚

      ### å¯è§æ€§æ§åˆ¶æ ¸å¿ƒç‰¹æ€§
      - ğŸ‘ï¸ **æ¡ä»¶æ˜¾ç¤º**ï¼šåŸºäºç”¨æˆ·é€‰æ‹©åŠ¨æ€æ˜¾ç¤ºç›¸å…³å­—æ®µ
      - ğŸ™ˆ **æ™ºèƒ½éšè—**ï¼šè‡ªåŠ¨éšè—ä¸ç›¸å…³æˆ–å¯é€‰å­—æ®µ
      - ğŸ”„ **å®æ—¶åˆ‡æ¢**ï¼šå³æ—¶å“åº”ç”¨æˆ·æ“ä½œçš„å­—æ®µæ˜¾éš
      - ğŸ¯ **ç”¨æˆ·ä½“éªŒ**ï¼šç®€åŒ–è¡¨å•ç•Œé¢ï¼Œå‡å°‘ç”¨æˆ·å›°æƒ‘
      - ğŸ›¡ï¸ **æ•°æ®ä¿æŠ¤**ï¼šéšè—å­—æ®µçš„æ•°æ®å®‰å…¨å¤„ç†
      - âš¡ **æ€§èƒ½ä¼˜åŒ–**ï¼šæŒ‰éœ€æ˜¾ç¤ºï¼Œæå‡é¡µé¢åŠ è½½é€Ÿåº¦
    </div>

    <div className="space-y-4">
      <h2 className="text-2xl font-bold tracking-tight">å…³é”®æ¦‚å¿µ</h2>
      <ul className="list-disc pl-6 space-y-2">
        <li>
          <strong>å®Œå…¨éšè— (hideField)</strong>
          ï¼šå­—æ®µå®Œå…¨ä¸å¯è§ï¼Œå…¶å€¼ä¹Ÿä¸ä¼šè¢«æäº¤
        </li>
        <li>
          <strong>è§†è§‰éšè— (visuallyHideField)</strong>
          ï¼šå­—æ®µä¸å¯è§ï¼Œä½†å…¶å€¼ä»ä¼šè¢«æäº¤
        </li>
        <li>
          <strong>æ˜¾ç¤ºå­—æ®µ (showField)</strong>ï¼šæ¢å¤å­—æ®µçš„å¯è§æ€§
        </li>
      </ul>
    </div>

    <div className="space-y-4">
      <h2 className="text-2xl font-bold tracking-tight">åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹</h2>
      <Tabs defaultValue="javascript">
        <TabsList>
          <TabsTrigger value="javascript">JavaScript</TabsTrigger>
        </TabsList>
        <TabsContent value="javascript">
          <CodeBlock code={sampleCode} language="javascript" />
        </TabsContent>
      </Tabs>
    </div>

    <div className="space-y-4">
      <h2 className="text-2xl font-bold tracking-tight">
        é«˜çº§ç¤ºä¾‹ï¼šè·å–å­—æ®µå…ƒç´ å¹¶æ·»åŠ æ§åˆ¶æŒ‰é’®
      </h2>
      <div>
        ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºå¦‚ä½•è·å–å­—æ®µå…ƒç´ ï¼Œå¹¶åœ¨å…¶æ—è¾¹æ·»åŠ æ§åˆ¶æŒ‰é’®ä»¥åˆ‡æ¢å…¶ä»–å­—æ®µçš„æ˜¾ç¤ºçŠ¶æ€ã€‚
      </div>
      <Tabs defaultValue="javascript">
        <TabsList>
          <TabsTrigger value="javascript">JavaScript</TabsTrigger>
        </TabsList>
        <TabsContent value="javascript">
          <CodeBlock code={additionalSampleCode} language="javascript" />
        </TabsContent>
      </Tabs>
    </div>

    <div className="space-y-4">
      <h2 className="text-2xl font-bold tracking-tight">ä½¿ç”¨è¯´æ˜</h2>
      <div>
        å°†ä»£ç å¤åˆ¶åˆ°æ‚¨çš„kinlinkè‡ªå®šä¹‰JavaScriptä¸­ï¼Œæ ¹æ®æ‚¨çš„è¡¨å•å­—æ®µå’Œéœ€æ±‚ä¿®æ”¹å­—æ®µä»£ç ã€‚æ‚¨å¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘æ§åˆ¶å­—æ®µçš„æ˜¾ç¤ºå’Œéšè—ã€‚
      </div>
      <div className="p-4 border rounded-md bg-yellow-50 border-yellow-200">
        <h3 className="font-semibold text-yellow-800">æ³¨æ„äº‹é¡¹</h3>
        <div className="text-yellow-800">
          é€‰æ‹©åˆé€‚çš„éšè—æ–¹å¼å¾ˆé‡è¦ã€‚å¦‚æœéœ€è¦ä¿ç•™å­—æ®µå€¼ç”¨äºåç»­å¤„ç†ï¼Œè¯·ä½¿ç”¨è§†è§‰éšè—ï¼›å¦‚æœå¸Œæœ›éšè—çš„å­—æ®µä¸å‚ä¸æäº¤ï¼Œåˆ™ä½¿ç”¨å®Œå…¨éšè—ã€‚
        </div>
      </div>
    </div>

    <div className="space-y-4">
      <h2 className="text-2xl font-bold tracking-tight">APIå‚è€ƒ</h2>
      <div>æ­¤ç¤ºä¾‹ä½¿ç”¨äº†ä»¥ä¸‹kinlink APIï¼š</div>
      <ul className="list-disc pl-6 space-y-2">
        <li>
          <code>kinlink.formApi.hideField(fieldCode)</code> -
          å®Œå…¨éšè—å­—æ®µï¼ˆå€¼ä¸æäº¤ï¼‰
        </li>
        <li>
          <code>kinlink.formApi.visuallyHideField(fieldCode)</code> -
          è§†è§‰éšè—å­—æ®µï¼ˆå€¼ä»æäº¤ï¼‰
        </li>
        <li>
          <code>kinlink.formApi.showField(fieldCode)</code> - æ˜¾ç¤ºå­—æ®µ
        </li>
      </ul>
    </div>

    <div className="space-y-4">
      <h2 className="text-2xl font-bold tracking-tight">å¸¸è§åº”ç”¨åœºæ™¯</h2>
      <ul className="list-disc pl-6 space-y-2">
        <li>åŸºäºç”¨æˆ·é€‰æ‹©æ˜¾ç¤º/éšè—ç›¸å…³å­—æ®µ</li>
        <li>ç®€åŒ–å¤æ‚è¡¨å•ï¼Œåªåœ¨éœ€è¦æ—¶æ˜¾ç¤ºé«˜çº§é€‰é¡¹</li>
        <li>æ ¹æ®ç”¨æˆ·æƒé™æ§åˆ¶æ•æ„Ÿå­—æ®µçš„å¯è§æ€§</li>
        <li>åˆ›å»ºåŠ¨æ€æ€§ã€äº¤äº’æ€§æ›´å¼ºçš„è¡¨å•</li>
      </ul>
    </div>

    <div className="mt-8 not-prose">
      <Link href="/examples">
        <Button variant="outline">
          <ArrowLeft className="mr-2 h-4 w-4" />
          è¿”å›ç¤ºä¾‹
        </Button>
      </Link>
    </div>
  </div>
</div> 