import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { CodeBlock } from "@/components/code-block";
import Link from "next/link";
import { ArrowLeft } from "lucide-react";
import { Button } from "@/components/ui/button";

export const sampleCode = `/**
 * ç¤ºä¾‹3: å­—æ®µæ˜¾ç¤º/éšè—æ§åˆ¶
 * åŠŸèƒ½ï¼šæ§åˆ¶è¡¨å•å­—æ®µçš„æ˜¾ç¤ºå’Œéšè—çŠ¶æ€
 */
(function () {
  kinlink.events.on(kinlink.FormEvents.FORM_LOADED, () => {
    try {
      // å®Œå…¨éšè—å­—æ®µï¼ˆå€¼ä¸ä¼šè¢«æäº¤ï¼‰
      kinlink.formApi.hideField('å¤šé€‰_0');

      // ä»…è§†è§‰ä¸Šéšè—å­—æ®µï¼ˆå€¼ä»ä¼šè¢«æäº¤ï¼‰
      kinlink.formApi.visuallyHideField('é€‰æ‹©ç»„ç»‡');

      // é€šè¿‡æŒ‰é’®æ§åˆ¶æ˜¾ç¤º/éšè—åŒè¡Œè€…è¡¨æ ¼
      const toggleButton = document.createElement('button');
      toggleButton.type = 'button';
      toggleButton.textContent = 'æ˜¾ç¤º/éšè—åŒè¡Œè€…ä¿¡æ¯';
      toggleButton.style.margin = '10px 0';
      toggleButton.style.padding = '5px 10px';

      // è·å–è¡¨å•å…ƒç´ å¹¶æ·»åŠ æŒ‰é’®
      const formElement = document.querySelector('.ant-form') || document.body;
      formElement.insertBefore(toggleButton, formElement.firstChild);

      // åˆå§‹éšè—åŒè¡Œè€…è¡¨æ ¼
      kinlink.formApi.hideField('è¡¨æ ¼_13');
      let isVisible = false;

      // è®¾ç½®ç‚¹å‡»äº‹ä»¶åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€
      toggleButton.addEventListener('click', () => {
        if (isVisible) {
          kinlink.formApi.hideField('è¡¨æ ¼_13');
          toggleButton.textContent = 'æ˜¾ç¤ºåŒè¡Œè€…ä¿¡æ¯';
        } else {
          kinlink.formApi.showField('è¡¨æ ¼_13');
          toggleButton.textContent = 'éšè—åŒè¡Œè€…ä¿¡æ¯';
        }
        isVisible = !isVisible;
      });
    } catch (error) {
      console.error('æ§åˆ¶å­—æ®µæ˜¾ç¤º/éšè—å¤±è´¥:', error);
    }
  });
})();
`;

export const additionalSampleCode = `/**
 * è·å–å­—æ®µå…ƒç´ ï¼Œå¹¶ä½¿ç”¨æ¡ä»¶éšè—
 * è§†è§‰éšè—ä¸ºè¢«éšè—çš„å†…å®¹æœ€ç»ˆè¿˜æ˜¯ä¼šè¢«æäº¤ï¼Œè€ŒçœŸå®éšè—ä¸ºè¢«éšè—çš„å†…å®¹ä¸ä¼šè¢«æäº¤
 */
(function () {
  kinlink.events.on(kinlink.FormEvents.FORM_LOADED, () => {
    try {
      // ========== æºå¸¯é›»è©±å­—æ®µåé¢æ’å…¥æŒ‰é’®ï¼Œæ§åˆ¶ä¼šç¤¾åéšè—/æ˜¾ç¤º ==========
      const targetFieldCode = 'æ–‡å­—åˆ—__1è¡Œ__2'; // æºå¸¯é›»è©±
      const controlFieldCode = 'å•è¡Œæ–‡æœ¬æ¡†_10'; // ä¼šç¤¾å

      const input = document.querySelector('[id$="' + targetFieldCode + '"]');
      if (input) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = 'éšè—/æ˜¾ç¤ºä¼šç¤¾å';
        btn.style.marginLeft = '8px';
        input.parentNode.insertBefore(btn, input.nextSibling);
        let isHidden = false;
        btn.onclick = function () {
          if (isHidden) {
            kinlink.formApi.showField(controlFieldCode);
            btn.textContent = 'éšè—ä¼šç¤¾å';
          } else {
            kinlink.formApi.hideField(controlFieldCode);
            btn.textContent = 'æ˜¾ç¤ºä¼šç¤¾å';
          }
          isHidden = !isHidden;
        };
      }

      // ========== Eãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å­—æ®µåé¢æ’å…¥æŒ‰é’®ï¼Œè§†è§‰éšè—/æ˜¾ç¤ºèº«åˆ†è¨¼ç•ªå· ==========
      const emailFieldCode = 'æ–‡å­—åˆ—__1è¡Œ__3'; // Eãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
      const idFieldCode = 'å•è¡Œæ–‡æœ¬æ¡†_11'; // ãƒ‘ã‚¹ãƒãƒ¼ãƒˆç•ªå·ï¼èº«åˆ†è¨¼ç•ªå·
      const emailInput = document.querySelector('[id$="' + emailFieldCode + '"]');
      if (emailInput) {
        const btn2 = document.createElement('button');
        btn2.type = 'button';
        btn2.textContent = 'è§†è§‰éšè—/æ˜¾ç¤ºèº«åˆ†è¨¼ç•ªå·';
        btn2.style.marginLeft = '8px';
        emailInput.parentNode.insertBefore(btn2, emailInput.nextSibling);
        let isVisuallyHidden = false;
        btn2.onclick = function () {
          if (isVisuallyHidden) {
            kinlink.formApi.showField(idFieldCode);
            btn2.textContent = 'è§†è§‰éšè—èº«åˆ†è¨¼ç•ªå·';
          } else {
            kinlink.formApi.visuallyHideField(idFieldCode);
            btn2.textContent = 'æ˜¾ç¤ºèº«åˆ†è¨¼ç•ªå·';
          }
          isVisuallyHidden = !isVisuallyHidden;
        };
      }
    } catch (error) {
      console.error('æ’å…¥æŒ‰é’®å¹¶æ§åˆ¶å­—æ®µæ˜¾ç¤ºå¤±è´¥:', error);
    }
  });
})();
`;

<div className="container max-w-4xl py-6 lg:py-10 mdx-content">
  <div className="flex items-center gap-4 mb-8">
    <Link href="/examples" className="flex items-center">
      <Button variant="outline" size="icon" className="h-10 w-10 flex items-center justify-center">
        <ArrowLeft className="h-4 w-4" />
      </Button>
    </Link>
    <h1 className="text-3xl font-bold tracking-tight m-0 p-0 leading-[1.2] flex items-center">å­—æ®µæ˜¾ç¤ºéšè—æ§åˆ¶ç¤ºä¾‹</h1>
  </div>

  <div className="space-y-8 px-8">
    <div>
      <h2>å­—æ®µå¯è§æ€§ç®¡ç†æ¦‚è§ˆ</h2>
      
      > åŠ¨æ€æ§åˆ¶è¡¨å•å­—æ®µçš„æ˜¾ç¤ºå’Œéšè—ï¼Œå®ç°æ™ºèƒ½è¡¨å•äº¤äº’ä½“éªŒ

      æ­¤ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨**kinlink API**æ§åˆ¶è¡¨å•å­—æ®µçš„**æ˜¾ç¤ºå’Œéšè—çŠ¶æ€**ã€‚é€šè¿‡**æ¡ä»¶é€»è¾‘**ã€**ç”¨æˆ·äº¤äº’å“åº”**å’Œ**åŠ¨æ€ç•Œé¢è°ƒæ•´**ï¼Œåˆ›å»ºæ›´åŠ æ™ºèƒ½å’Œç”¨æˆ·å‹å¥½çš„è¡¨å•ä½“éªŒã€‚

      ### å¯è§æ€§æ§åˆ¶æ ¸å¿ƒåŠŸèƒ½
      - ğŸ‘ï¸ **å­—æ®µæ˜¾ç¤ºæ§åˆ¶**ï¼šæ ¹æ®æ¡ä»¶åŠ¨æ€æ˜¾ç¤ºç‰¹å®šå­—æ®µ
      - ğŸ™ˆ **å­—æ®µéšè—æœºåˆ¶**ï¼šéšè—ä¸ç›¸å…³æˆ–æ¡ä»¶ä¸æ»¡è¶³çš„å­—æ®µ
      - ğŸ”„ **å®æ—¶å“åº”**ï¼šåŸºäºç”¨æˆ·è¾“å…¥å®æ—¶è°ƒæ•´ç•Œé¢å¸ƒå±€
      - ğŸ¯ **æ¡ä»¶é€»è¾‘**ï¼šå¤æ‚çš„å­—æ®µä¾èµ–å…³ç³»ç®¡ç†
      - ğŸ“± **ç•Œé¢ä¼˜åŒ–**ï¼šå‡å°‘è§†è§‰å™ªéŸ³ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
      - âš¡ **æ€§èƒ½å‹å¥½**ï¼šé«˜æ•ˆçš„DOMæ“ä½œå’ŒçŠ¶æ€ç®¡ç†
    </div>

    <div>
      <h2>å…³é”®åŠŸèƒ½</h2>
      <ul>
        <li>åŠ¨æ€æ˜¾ç¤ºæŒ‡å®šå­—æ®µ</li>
        <li>åŠ¨æ€éšè—æŒ‡å®šå­—æ®µ</li>
        <li>æ‰¹é‡æ§åˆ¶å¤šä¸ªå­—æ®µçš„å¯è§æ€§</li>
        <li>åŸºäºæ¡ä»¶çš„å­—æ®µæ˜¾ç¤ºé€»è¾‘</li>
      </ul>
    </div>

    <div>
      <h2>ä»£ç ç¤ºä¾‹</h2>
      <div className="-ml-8">
        <Tabs defaultValue="javascript">
          <TabsList className="ml-8">
            <TabsTrigger value="javascript">JavaScript</TabsTrigger>
          </TabsList>
          <TabsContent value="javascript" className="mt-4">
            <CodeBlock 
              code={`/**
 * ç¤ºä¾‹3: å­—æ®µæ˜¾ç¤ºéšè—æ§åˆ¶
 * åŠŸèƒ½ï¼šåŠ¨æ€æ§åˆ¶è¡¨å•å­—æ®µçš„æ˜¾ç¤ºå’Œéšè—
 */
(function () {
  kinlink.events.on(kinlink.FormEvents.FORM_LOADED, () => {
    try {
      // éšè—æŒ‡å®šå­—æ®µ
      kinlink.formApi.hideField('å•è¡Œæ–‡æœ¬æ¡†_10');
      kinlink.formApi.hideField('æ—¥æœŸ_2');

      // æ˜¾ç¤ºæŒ‡å®šå­—æ®µ
      kinlink.formApi.showField('æ–‡å­—åˆ—__1è¡Œ__0');
      kinlink.formApi.showField('æ–‡å­—åˆ—__1è¡Œ__1');

      // æ‰¹é‡éšè—å¤šä¸ªå­—æ®µ
      const fieldsToHide = ['å•è¡Œæ–‡æœ¬æ¡†_8', 'å•è¡Œæ–‡æœ¬æ¡†_9'];
      fieldsToHide.forEach((fieldCode) => {
        kinlink.formApi.hideField(fieldCode);
      });

      // åˆ›å»ºåˆ‡æ¢æŒ‰é’®æ¥æ¼”ç¤ºåŠ¨æ€æ§åˆ¶
      const toggleButton = document.createElement('button');
      toggleButton.textContent = 'åˆ‡æ¢å­—æ®µæ˜¾ç¤º';
      toggleButton.style.margin = '10px 0';
      toggleButton.style.padding = '8px 16px';
      toggleButton.style.backgroundColor = '#3498db';
      toggleButton.style.color = 'white';
      toggleButton.style.border = 'none';
      toggleButton.style.borderRadius = '4px';
      toggleButton.style.cursor = 'pointer';

      let isHidden = false;
      toggleButton.addEventListener('click', () => {
        if (isHidden) {
          kinlink.formApi.showField('å•è¡Œæ–‡æœ¬æ¡†_10');
          kinlink.formApi.showField('æ—¥æœŸ_2');
          toggleButton.textContent = 'éšè—å­—æ®µ';
        } else {
          kinlink.formApi.hideField('å•è¡Œæ–‡æœ¬æ¡†_10');
          kinlink.formApi.hideField('æ—¥æœŸ_2');
          toggleButton.textContent = 'æ˜¾ç¤ºå­—æ®µ';
        }
        isHidden = !isHidden;
      });

      // æ·»åŠ æŒ‰é’®åˆ°è¡¨å•
      const formElement = document.querySelector('.ant-form') || document.body;
      formElement.insertBefore(toggleButton, formElement.firstChild);
    } catch (error) {
      console.error('æ§åˆ¶å­—æ®µæ˜¾ç¤ºéšè—å¤±è´¥:', error);
    }
  });
})();`} 
              language="javascript" 
            />
          </TabsContent>
        </Tabs>
      </div>
    </div>

    <div>
      <h2>ä½¿ç”¨è¯´æ˜</h2>
      <div>
        è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œåªéœ€å°†ä»£ç å¤åˆ¶åˆ°æ‚¨çš„kinlinkè‡ªå®šä¹‰JavaScriptä¸­ã€‚æ ¹æ®æ‚¨çš„è¡¨å•å­—æ®µï¼Œä¿®æ”¹ä»£ç ä¸­çš„å­—æ®µä»£ç ã€‚æ‚¨å¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘æ§åˆ¶å­—æ®µçš„æ˜¾ç¤ºå’Œéšè—ã€‚
      </div>
      <div>
        å®Œæ•´ä»£ç è¯·ä¸‹è½½æŸ¥çœ‹ï¼š
        <a
          href="/samplesCodes/3-å­—æ®µæ˜¾ç¤ºéšè—æ§åˆ¶.js"
          className="text-primary hover:underline ml-1"
          download="3-å­—æ®µæ˜¾ç¤ºéšè—æ§åˆ¶.js"
        >
          3-å­—æ®µæ˜¾ç¤ºéšè—æ§åˆ¶.js
        </a>
      </div>
      <div className="p-4 border rounded-md bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700">
        <h3 className="font-semibold text-yellow-800 dark:text-yellow-200">æ³¨æ„äº‹é¡¹</h3>
        <div className="text-yellow-800 dark:text-yellow-300">
          éšè—çš„å­—æ®µä»ç„¶å­˜åœ¨äºDOMä¸­ï¼Œåªæ˜¯è§†è§‰ä¸Šä¸å¯è§ã€‚å¦‚æœéœ€è¦å®Œå…¨ç§»é™¤å­—æ®µï¼Œè¯·è°¨æ…æ“ä½œä»¥é¿å…å½±å“è¡¨å•éªŒè¯ã€‚
        </div>
      </div>
    </div>

    <div>
      <h2>APIå‚è€ƒ</h2>
      <div>æ­¤ç¤ºä¾‹ä½¿ç”¨äº†ä»¥ä¸‹kinlink APIï¼š</div>
      <ul>
        <li>
          <code>kinlink.events.on(eventName, callback)</code> -
          æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨
        </li>
        <li>
          <code>kinlink.FormEvents.FORM_LOADED</code> - è¡¨å•åŠ è½½å®Œæˆäº‹ä»¶
        </li>
        <li>
          <code>kinlink.formApi.hideField(fieldCode)</code> -
          éšè—æŒ‡å®šå­—æ®µ
        </li>
        <li>
          <code>kinlink.formApi.showField(fieldCode)</code> -
          æ˜¾ç¤ºæŒ‡å®šå­—æ®µ
        </li>
      </ul>
    </div>
  </div>
</div> 